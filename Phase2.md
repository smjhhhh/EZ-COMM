# AI旅行Agent - Phase 2 任务图 (Week 9-16)

核心目标： 验证专业用户 (10个铁杆粉丝)，启动认知资产飞轮 (Feedback -> Asset -> Improvement)。

核心交付物： 1. 迭代后的Streamlit工具 2. 结构化的“用户反馈”数据库 3. V1版的“POI知识图谱”（包含专业Tip）

核心原则： 1. 用户反馈是第一优先级 2. 将“反馈”转化为“可评估的Case” 3. 将“Tip”转化为“结构化知识”

### Sprint 5 (Week 9-10): 专业用户启动 (Onboarding)

**目标：** 成功引导前5个专业用户上手使用，并建立高效的反馈闭环。

| **任务ID** | **任务类型** | **任务描述**                 | **关键交付物**                                | **备注**                                                                        |
| ---------------- | ------------------ | ---------------------------------- | --------------------------------------------------- | ------------------------------------------------------------------------------------- |
| **P2.T1**  | `PM`             | **专业用户 Onboarding**      | - 5个活跃的专业用户- 1-on-1 培训文档                | 拿到 `P1.T14`的链接，教会他们如何使用，如何提反馈。                                 |
| **P2.T2**  | `Frontend`       | **Streamlit "一键反馈"功能** | - app.py v2- "这个行程很棒" / "这个行程有问题" 按钮 | **[关键任务]**用户点击按钮时，必须自动记录当前的输入、输出和用户ID。                  |
| **P2.T3**  | `Backend`        | **建立"用户反馈"数据库**     | -`user_feedback`表 (SQL)                          | 用于存储 `P2.T2`捕获的原始数据。这是“认知资产”的源头。                            |
| **P2.T4**  | `PM`/`QA`      | **反馈分诊 (Triage)**        | - 每周反馈Triage会议- "失败Case v2" 列表            | (遵照飞轮设计) 分析 `P2.T3`的数据：哪些是新Case？哪些是Prompt问题？哪些是知识缺失？ |

### Sprint 6 (Week 11-12): 飞轮启动 (Flywheel Ignition)

**目标：** 将用户的定性反馈（Feedback）转化为定量的系统资产（Assets）。

| **任务ID** | **任务类型** | **任务描述**                   | **关键交付物**             | **备注**                                                                                            |
| ---------------- | ------------------ | ------------------------------------ | -------------------------------- | --------------------------------------------------------------------------------------------------------- |
| **P2.T5**  | `LLM`            | **迭代 `PlannerAgent`(v3)**  | -`PlannerAgent`Prompt v3       | 基于 `P2.T4`分析出的真实失败Case进行迭代优化。                                                          |
| **P2.T6**  | `Backend`        | **构建 V1 "POI知识图谱" (KG)** | -`poi_knowledge_graph`表 (SQL) | (遵照风险点四)**这不是爬虫！**这是存储用户提供的“专业Tip”的地方。                                       |
| **P2.T7**  | `Data`           | **手动录入KG (v1)**            | - KG中包含 `50+`条专业Tip      | 例如：`{poi_id: "gugong", tip: "周一闭馆", source: "user_A"}`。                                         |
| **P2.T8**  | `LLM`            | **`ContextAgent`升级**       | -`ContextAgent`逻辑 v2         | **[核心资产]**Agent在调用付费API**之前** ，**必须先**查询我们自己的 `poi_knowledge_graph`。 |
| **P2.T9**  | `QA`             | **L2 评估 (迭代)**             | - L2 评估报告                    | 将 `P2.T4`的新失败Case加入 `golden_set`，确保L2成功率**保持**在 70% 以上。                      |

### Sprint 7 (Week 13-14): 评估自动化 (Automation)

**目标：** 解放手动评估的人力，将 L1/L2 评估流程自动化。

| **任务ID** | **任务类型** | **任务描述**              | **关键交付物**                | **备注**                                                                                 |
| ---------------- | ------------------ | ------------------------------- | ----------------------------------- | ---------------------------------------------------------------------------------------------- |
| **P2.T10** | `Infra`          | **自动化 L1 评估**        | - 自动化的 `evaluate_L1.py`脚本   | (遵照风险点三) 自动化检查：1. 工具是否被正确调用？2. API参数是否正确？                         |
| **P2.T11** | `Infra`          | **自动化 L2 评估 (部分)** | - 自动化的 `evaluate_L2_rules.py` | 自动化检查规则性错误：1. 是否违反 poi_kg 里的规则 (如：周一闭馆)？2. 时间/地理是否有明显冲突？ |
| **P2.T12** | `DevOps`         | **建立CI/CD (v0.1)**      | - GitHub Actions 工作流             | 当代码合并到 `main`分支时，**自动运行** `P2.T10`和 `P2.T11`的评估脚本。            |
| **P2.T13** | `PM`             | **扩展用户池**            | - 累计 10-15个 活跃专业用户         | 持续获取新用户，为系统带来更多“边缘Case”。                                                   |

### Sprint 8 (Week 15-16): 资产沉淀 & 准备 PMF

**目标：** 形成可量化的“认知资产”数据，为 Phase 3 (产品市场契合) 做准备。

| **任务ID** | **任务类型** | **任务描述**            | **关键交付物**            | **备注**                                                                                             |
| ---------------- | ------------------ | ----------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| **P2.T14** | `PM`             | **深度用户访谈**        | - 5份深度访谈纪要               | 访谈你最活跃的5个用户：他们为什么用？解决了什么核心问题？愿意为什么付费？                                  |
| **P2.T15** | `Data`           | **认知资产仪表盘 (v1)** | - 一个Streamlit数据看板         | [给投资人看] 展示：1. poi_kg 知识条目增长曲线 (e.g., 500+ 条专业Tip)。2. L2 自动化评估成功率 (e.g., 85%)。 |
| **P2.T16** | `Tech`           | **性能/成本分析**       | - API成本分析报告- 性能瓶颈分析 | 识别最烧钱/最慢的Agent。开始规划Phase 3的优化 (如：缓存)。                                                 |
| **P2.T17** | `PM`/`Tech`    | **定义 Phase 3 目标**   | - Phase 3 规划文档              | 目标：从10个用户 -> 100个用户。技术：正式启动 Next.js 前端。产品：设计V1付费方案。                         |
