# ğŸš€ éƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [éƒ¨ç½²å‰å‡†å¤‡](#éƒ¨ç½²å‰å‡†å¤‡)
2. [Streamlit Community Cloud éƒ¨ç½²](#streamlit-community-cloud-éƒ¨ç½²) (æ¨è)
3. [Heroku éƒ¨ç½²](#heroku-éƒ¨ç½²)
4. [Railway éƒ¨ç½²](#railway-éƒ¨ç½²)
5. [Docker éƒ¨ç½²](#docker-éƒ¨ç½²)
6. [è‡ªæ‰˜ç®¡æœåŠ¡å™¨éƒ¨ç½²](#è‡ªæ‰˜ç®¡æœåŠ¡å™¨éƒ¨ç½²)
7. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
8. [ç›‘æ§ä¸ç»´æŠ¤](#ç›‘æ§ä¸ç»´æŠ¤)
9. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ“ éƒ¨ç½²å‰å‡†å¤‡

### 1. æ£€æŸ¥æ¸…å•

åœ¨éƒ¨ç½²ä¹‹å‰ï¼Œç¡®ä¿å®Œæˆä»¥ä¸‹å‡†å¤‡å·¥ä½œ:

- [ ] ä»£ç å·²æäº¤åˆ° Git ä»“åº“
- [ ] `.env` æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore`
- [ ] å·²è·å–æ‰€æœ‰å¿…éœ€çš„ API Keys
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] `requirements.txt` æ˜¯æœ€æ–°çš„
- [ ] README æ–‡æ¡£å·²æ›´æ–°

### 2. éªŒè¯æœ¬åœ°è¿è¡Œ

```bash
# ç¡®ä¿æœ¬åœ°è¿è¡Œæ­£å¸¸
streamlit run streamlit_app.py

# æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
# - API è¿æ¥
# - æœç´¢åŠŸèƒ½
# - å¤©æ°”æŸ¥è¯¢
# - è®¡ç®—åŠŸèƒ½
```

### 3. å‡†å¤‡ API Keys

ç¡®ä¿æ‚¨æœ‰ä»¥ä¸‹ API Keys:
- âœ… **OpenAI API Key** (å¿…éœ€)
- âš ï¸ **Serper API Key** (æ¨è)
- âš ï¸ **OpenWeatherMap API Key** (å¯é€‰)

---

## â˜ï¸ Streamlit Community Cloud éƒ¨ç½² (æ¨è)

### ä¸ºä»€ä¹ˆé€‰æ‹© Streamlit Cloud?

- âœ… **å®Œå…¨å…è´¹** (å…¬å¼€é¡¹ç›®)
- âœ… **é›¶é…ç½®** è‡ªåŠ¨éƒ¨ç½²
- âœ… **å¿«é€Ÿéƒ¨ç½²** å‡ åˆ†é’Ÿå†…ä¸Šçº¿
- âœ… **è‡ªåŠ¨æ›´æ–°** Git push å³éƒ¨ç½²
- âœ… **å†…ç½® Secrets ç®¡ç†**
- âœ… **æ— éœ€ä¿¡ç”¨å¡**

### æ­¥éª¤ 1: å‡†å¤‡ GitHub ä»“åº“

#### 1.1 åˆ›å»º GitHub ä»“åº“

```bash
# åˆå§‹åŒ– Git (å¦‚æœè¿˜æ²¡æœ‰)
git init
git add .
git commit -m "Initial commit"

# åˆ›å»º GitHub ä»“åº“å¹¶æ¨é€
git remote add origin https://github.com/your-username/ai-travel-agent.git
git branch -M main
git push -u origin main
```

#### 1.2 ç¡®ä¿ .gitignore æ­£ç¡®

`.gitignore` åº”åŒ…å«:
```
.env
__pycache__/
*.pyc
.vscode/
.idea/
venv/
*.log
```

### æ­¥éª¤ 2: åœ¨ Streamlit Cloud ä¸Šéƒ¨ç½²

#### 2.1 ç™»å½• Streamlit Cloud

1. è®¿é—® [share.streamlit.io](https://share.streamlit.io)
2. ç‚¹å‡» "Sign up" æˆ– "Sign in"
3. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
4. æˆæƒ Streamlit è®¿é—®æ‚¨çš„ GitHub ä»“åº“

#### 2.2 åˆ›å»ºæ–°åº”ç”¨

1. ç‚¹å‡» "New app" æˆ– "Deploy an app"
2. å¡«å†™åº”ç”¨ä¿¡æ¯:
   - **Repository**: `your-username/ai-travel-agent`
   - **Branch**: `main`
   - **Main file path**: `streamlit_app.py`
   - **App URL** (optional): è‡ªå®šä¹‰ URL (å¦‚ `my-travel-agent`)

3. ç‚¹å‡» "Deploy!"

### æ­¥éª¤ 3: é…ç½® Secrets

#### 3.1 æ·»åŠ  API Keys

1. ç­‰å¾…åº”ç”¨é¦–æ¬¡éƒ¨ç½² (å¯èƒ½ä¼šå¤±è´¥ï¼Œè¿™æ˜¯æ­£å¸¸çš„)
2. ç‚¹å‡»å³ä¸Šè§’ "â‹®" â†’ "Settings"
3. é€‰æ‹©å·¦ä¾§èœå•çš„ "Secrets"
4. åœ¨æ–‡æœ¬æ¡†ä¸­æ·»åŠ  (TOML æ ¼å¼):

```toml
# Streamlit Secrets (TOML format)

# OpenAI API Key (å¿…éœ€)
OPENAI_API_KEY = "sk-proj-your_actual_openai_key_here"

# Google Serper API Key (æ¨è)
SERPER_API_KEY = "your_serper_api_key_here"

# OpenWeatherMap API Key (å¯é€‰)
OPENWEATHERMAP_API_KEY = "your_weather_api_key_here"
```

5. ç‚¹å‡» "Save"
6. åº”ç”¨ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²

### æ­¥éª¤ 4: éªŒè¯éƒ¨ç½²

1. ç­‰å¾…åº”ç”¨é‡æ–°å¯åŠ¨ (é€šå¸¸ 1-2 åˆ†é’Ÿ)
2. è®¿é—®æ‚¨çš„åº”ç”¨ URL: `https://your-app-name.streamlit.app`
3. æ£€æŸ¥ä¾§è¾¹æ  API çŠ¶æ€:
   - âœ… OpenAI API åº”è¯¥æ˜¾ç¤ºç»¿è‰²
   - âœ… å…¶ä»– API æ ¹æ®é…ç½®æ˜¾ç¤ºçŠ¶æ€
4. æµ‹è¯•ä¸€ä¸ªç¤ºä¾‹æŸ¥è¯¢

### æ­¥éª¤ 5: è‡ªåŠ¨éƒ¨ç½²è®¾ç½®

Streamlit Cloud é»˜è®¤å¯ç”¨è‡ªåŠ¨éƒ¨ç½²:
- **æ¯æ¬¡ Git push** â†’ **è‡ªåŠ¨é‡æ–°éƒ¨ç½²**
- **ç›‘æ§ main åˆ†æ”¯** â†’ **æ£€æµ‹åˆ°æ›´æ”¹æ—¶éƒ¨ç½²**

å¦‚æœéœ€è¦ç¦ç”¨è‡ªåŠ¨éƒ¨ç½²:
1. Settings â†’ General
2. å–æ¶ˆå‹¾é€‰ "Automatically deploy when changes are pushed"

### ç®¡ç†åº”ç”¨

#### æŸ¥çœ‹æ—¥å¿—
1. åœ¨åº”ç”¨ç•Œé¢ï¼Œç‚¹å‡»å³ä¸‹è§’ "Manage app"
2. æŸ¥çœ‹ "Logs" æ ‡ç­¾
3. å¯ä»¥çœ‹åˆ°å®æ—¶æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯

#### é‡å¯åº”ç”¨
1. Settings â†’ "Reboot app"
2. æˆ–ç‚¹å‡»å³ä¸Šè§’ "â‹®" â†’ "Reboot"

#### åˆ é™¤åº”ç”¨
1. Settings â†’ "Delete app"
2. è¾“å…¥åº”ç”¨åç§°ç¡®è®¤

---

## ğŸŸ£ Heroku éƒ¨ç½²

### å‰ææ¡ä»¶

- Heroku è´¦å·
- Heroku CLI å·²å®‰è£…

### æ­¥éª¤ 1: å®‰è£… Heroku CLI

```bash
# macOS
brew tap heroku/brew && brew install heroku

# Windows
# ä¸‹è½½å®‰è£…ç¨‹åº: https://devcenter.heroku.com/articles/heroku-cli

# éªŒè¯å®‰è£…
heroku --version
```

### æ­¥éª¤ 2: ç™»å½• Heroku

```bash
heroku login
# æŒ‰ä»»æ„é”®æ‰“å¼€æµè§ˆå™¨ç™»å½•
```

### æ­¥éª¤ 3: åˆ›å»ºå¿…éœ€æ–‡ä»¶

#### 3.1 åˆ›å»º `Procfile`

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `Procfile`:

```
web: sh setup.sh && streamlit run streamlit_app.py --server.port=$PORT --server.address=0.0.0.0
```

#### 3.2 åˆ›å»º `setup.sh`

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `setup.sh`:

```bash
mkdir -p ~/.streamlit/

echo "\
[general]\n\
email = \"your-email@domain.com\"\n\
" > ~/.streamlit/credentials.toml

echo "\
[server]\n\
headless = true\n\
enableCORS=false\n\
port = $PORT\n\
" > ~/.streamlit/config.toml
```

#### 3.3 åˆ›å»º `runtime.txt` (å¯é€‰)

æŒ‡å®š Python ç‰ˆæœ¬:

```
python-3.11.5
```

### æ­¥éª¤ 4: åˆ›å»º Heroku åº”ç”¨

```bash
# åˆ›å»ºåº”ç”¨
heroku create your-travel-agent-app

# æˆ–è€…è®© Heroku è‡ªåŠ¨ç”Ÿæˆåç§°
heroku create
```

### æ­¥éª¤ 5: é…ç½®ç¯å¢ƒå˜é‡

```bash
# è®¾ç½® OpenAI API Key (å¿…éœ€)
heroku config:set OPENAI_API_KEY=sk-proj-your_key_here

# è®¾ç½® Serper API Key (æ¨è)
heroku config:set SERPER_API_KEY=your_serper_key_here

# è®¾ç½® Weather API Key (å¯é€‰)
heroku config:set OPENWEATHERMAP_API_KEY=your_weather_key_here

# æŸ¥çœ‹æ‰€æœ‰é…ç½®
heroku config
```

### æ­¥éª¤ 6: éƒ¨ç½²åº”ç”¨

```bash
# æ·»åŠ æ–‡ä»¶åˆ° Git
git add Procfile setup.sh runtime.txt
git commit -m "Add Heroku deployment files"

# éƒ¨ç½²åˆ° Heroku
git push heroku main

# å¦‚æœä½ çš„ä¸»åˆ†æ”¯æ˜¯ master
git push heroku master:main
```

### æ­¥éª¤ 7: æ‰“å¼€åº”ç”¨

```bash
# è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨
heroku open

# æŸ¥çœ‹æ—¥å¿—
heroku logs --tail
```

### ç®¡ç† Heroku åº”ç”¨

```bash
# é‡å¯åº”ç”¨
heroku restart

# æŸ¥çœ‹åº”ç”¨ä¿¡æ¯
heroku info

# è¿›å…¥åº”ç”¨ shell
heroku run bash

# æŸ¥çœ‹è¿›ç¨‹
heroku ps
```

---

## ğŸš‚ Railway éƒ¨ç½²

### ä¸ºä»€ä¹ˆé€‰æ‹© Railway?

- âœ… ç®€å•æ˜“ç”¨
- âœ… è‡ªåŠ¨ HTTPS
- âœ… å…è´¹é¢åº¦ ($5/æœˆ)
- âœ… å¿«é€Ÿéƒ¨ç½²

### æ­¥éª¤ 1: æ³¨å†Œ Railway

1. è®¿é—® [railway.app](https://railway.app)
2. ä½¿ç”¨ GitHub è´¦å·æ³¨å†Œ/ç™»å½•

### æ­¥éª¤ 2: åˆ›å»ºæ–°é¡¹ç›®

1. ç‚¹å‡» "New Project"
2. é€‰æ‹© "Deploy from GitHub repo"
3. é€‰æ‹©æ‚¨çš„ä»“åº“: `your-username/ai-travel-agent`
4. Railway ä¼šè‡ªåŠ¨æ£€æµ‹ Python é¡¹ç›®

### æ­¥éª¤ 3: é…ç½®ç¯å¢ƒå˜é‡

1. åœ¨é¡¹ç›® Dashboard ä¸­ï¼Œç‚¹å‡»é¡¹ç›®
2. é€‰æ‹© "Variables" æ ‡ç­¾
3. æ·»åŠ ç¯å¢ƒå˜é‡:
   - `OPENAI_API_KEY`: `sk-proj-your_key_here`
   - `SERPER_API_KEY`: `your_serper_key_here`
   - `OPENWEATHERMAP_API_KEY`: `your_weather_key_here`

### æ­¥éª¤ 4: é…ç½®å¯åŠ¨å‘½ä»¤

1. åœ¨ Settings ä¸­æ‰¾åˆ° "Start Command"
2. è®¾ç½®ä¸º:
```bash
streamlit run streamlit_app.py --server.port=$PORT --server.address=0.0.0.0
```

### æ­¥éª¤ 5: ç”ŸæˆåŸŸå

1. åœ¨ Settings ä¸­æ‰¾åˆ° "Domains"
2. ç‚¹å‡» "Generate Domain"
3. Railway ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªåŸŸåï¼Œå¦‚:
   - `your-app.up.railway.app`

### æ­¥éª¤ 6: éƒ¨ç½²

1. ç‚¹å‡» "Deploy"
2. ç­‰å¾…æ„å»ºå®Œæˆ (é€šå¸¸ 2-5 åˆ†é’Ÿ)
3. è®¿é—®ç”Ÿæˆçš„åŸŸå

---

## ğŸ³ Docker éƒ¨ç½²

### æ­¥éª¤ 1: åˆ›å»º Dockerfile

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `Dockerfile`:

```dockerfile
FROM python:3.11-slim

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…ä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8501

# å¥åº·æ£€æŸ¥
HEALTHCHECK CMD curl --fail http://localhost:8501/_stcore/health

# å¯åŠ¨å‘½ä»¤
ENTRYPOINT ["streamlit", "run", "streamlit_app.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

### æ­¥éª¤ 2: åˆ›å»º .dockerignore

```
.env
__pycache__
*.pyc
.git
.gitignore
venv/
.vscode/
*.md
Dockerfile
.dockerignore
```

### æ­¥éª¤ 3: æ„å»º Docker é•œåƒ

```bash
# æ„å»ºé•œåƒ
docker build -t ai-travel-agent .

# æŸ¥çœ‹é•œåƒ
docker images
```

### æ­¥éª¤ 4: è¿è¡Œå®¹å™¨

```bash
# è¿è¡Œå®¹å™¨
docker run -p 8501:8501 \
  -e OPENAI_API_KEY="sk-proj-your_key_here" \
  -e SERPER_API_KEY="your_serper_key_here" \
  -e OPENWEATHERMAP_API_KEY="your_weather_key_here" \
  ai-travel-agent

# æˆ–ä½¿ç”¨ .env æ–‡ä»¶
docker run -p 8501:8501 --env-file .env ai-travel-agent
```

### æ­¥éª¤ 5: ä½¿ç”¨ Docker Compose (æ¨è)

åˆ›å»º `docker-compose.yml`:

```yaml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "8501:8501"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - SERPER_API_KEY=${SERPER_API_KEY}
      - OPENWEATHERMAP_API_KEY=${OPENWEATHERMAP_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8501/_stcore/health"]
      interval: 30s
      timeout: 10s
      retries: 3
```

è¿è¡Œ:
```bash
# å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢
docker-compose down
```

---

## ğŸ–¥ï¸ è‡ªæ‰˜ç®¡æœåŠ¡å™¨éƒ¨ç½²

### æ–¹æ¡ˆ 1: ä½¿ç”¨ Nginx + Systemd

#### æ­¥éª¤ 1: åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®é¡¹ç›®

```bash
# è¿æ¥åˆ°æœåŠ¡å™¨
ssh user@your-server-ip

# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/ai-travel-agent.git
cd ai-travel-agent

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
nano .env
# æ·»åŠ æ‚¨çš„ API Keys
```

#### æ­¥éª¤ 2: åˆ›å»º Systemd æœåŠ¡

åˆ›å»º `/etc/systemd/system/travel-agent.service`:

```ini
[Unit]
Description=AI Travel Agent Streamlit App
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/ai-travel-agent
Environment="PATH=/path/to/ai-travel-agent/venv/bin"
EnvironmentFile=/path/to/ai-travel-agent/.env
ExecStart=/path/to/ai-travel-agent/venv/bin/streamlit run streamlit_app.py --server.port=8501 --server.address=127.0.0.1
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡:
```bash
# é‡æ–°åŠ è½½ systemd
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl start travel-agent

# è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl enable travel-agent

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status travel-agent
```

#### æ­¥éª¤ 3: é…ç½® Nginx

åˆ›å»º `/etc/nginx/sites-available/travel-agent`:

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:8501;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400;
    }
}
```

å¯ç”¨ç«™ç‚¹:
```bash
# åˆ›å»ºç¬¦å·é“¾æ¥
sudo ln -s /etc/nginx/sites-available/travel-agent /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

#### æ­¥éª¤ 4: é…ç½® SSL (Let's Encrypt)

```bash
# å®‰è£… Certbot
sudo apt install certbot python3-certbot-nginx

# è·å– SSL è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸå·²é…ç½®
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. ä»£ç ä¼˜åŒ–

#### 1.1 ä½¿ç”¨ Streamlit ç¼“å­˜

```python
import streamlit as st

# ç¼“å­˜ LLM åˆå§‹åŒ–
@st.cache_resource
def initialize_travel_agent():
    # ... åˆå§‹åŒ–ä»£ç 
    return react_graph

# ç¼“å­˜æœç´¢ç»“æœ
@st.cache_data(ttl=3600)  # ç¼“å­˜ 1 å°æ—¶
def search_destination(query):
    # ... æœç´¢ä»£ç 
    return results
```

#### 1.2 å‡å°‘ Token ä½¿ç”¨

```python
# ç¼©çŸ­ç³»ç»Ÿæç¤ºè¯
system_prompt = SystemMessage("ç®€æ´çš„æç¤ºè¯...")

# å‡å°‘ max_tokens
llm = ChatOpenAI(
    model="gpt-4o",
    max_tokens=1000,  # ä» 2000 å‡å°‘åˆ° 1000
    temperature=0
)
```

#### 1.3 å®ç°è¯·æ±‚é™æµ

```python
import time
from functools import wraps

def rate_limit(max_calls, time_window):
    calls = []
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            now = time.time()
            # ç§»é™¤è¿‡æœŸçš„è°ƒç”¨
            calls[:] = [c for c in calls if c > now - time_window]
            if len(calls) >= max_calls:
                wait_time = calls[0] + time_window - now
                st.warning(f"è¯·ç­‰å¾… {wait_time:.0f} ç§’åå†è¯•")
                return None
            calls.append(now)
            return func(*args, **kwargs)
        return wrapper
    return decorator

# ä½¿ç”¨
@rate_limit(max_calls=10, time_window=60)  # æ¯åˆ†é’Ÿæœ€å¤š 10 æ¬¡
def call_openai_api(query):
    # ...
    pass
```

### 2. æœåŠ¡å™¨ä¼˜åŒ–

#### 2.1 ä½¿ç”¨ CDN

å¯¹äºé™æ€èµ„æºï¼Œä½¿ç”¨ CDN åŠ é€Ÿ:
- Cloudflare (å…è´¹)
- AWS CloudFront
- Google Cloud CDN

#### 2.2 å¯ç”¨ Gzip å‹ç¼©

Nginx é…ç½®:
```nginx
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types text/plain text/css text/xml text/javascript application/json application/javascript;
```

#### 2.3 å¢åŠ æœåŠ¡å™¨èµ„æº

- **CPU**: 2 æ ¸å¿ƒæˆ–æ›´å¤š
- **å†…å­˜**: è‡³å°‘ 2GB RAM
- **ç£ç›˜**: 10GB+ ç©ºé—´

---

## ğŸ“Š ç›‘æ§ä¸ç»´æŠ¤

### 1. åº”ç”¨ç›‘æ§

#### 1.1 Streamlit å†…ç½®ç›‘æ§

æ·»åŠ åˆ° `streamlit_app.py`:

```python
# æ·»åŠ ä½¿ç”¨ç»Ÿè®¡
if 'query_count' not in st.session_state:
    st.session_state.query_count = 0

st.sidebar.metric("Total Queries", st.session_state.query_count)

# è®°å½•æ¯æ¬¡æŸ¥è¯¢
if st.button("ğŸš€ Plan My Trip"):
    st.session_state.query_count += 1
    # ... å¤„ç†æŸ¥è¯¢
```

#### 1.2 æ—¥å¿—è®°å½•

```python
import logging
from datetime import datetime

# é…ç½®æ—¥å¿—
logging.basicConfig(
    filename='app.log',
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)

# è®°å½•äº‹ä»¶
logging.info(f"User query: {query}")
logging.error(f"API error: {error}")
```

### 2. API ä½¿ç”¨ç›‘æ§

#### 2.1 OpenAI ä½¿ç”¨é‡

å®šæœŸæ£€æŸ¥:
1. è®¿é—® [OpenAI Usage Dashboard](https://platform.openai.com/usage)
2. æŸ¥çœ‹æ¯æ—¥/æ¯æœˆä½¿ç”¨é‡
3. è®¾ç½®é¢„ç®—è­¦æŠ¥

#### 2.2 é”™è¯¯ç›‘æ§

ä½¿ç”¨ Sentry æˆ–ç±»ä¼¼æœåŠ¡:
```bash
pip install sentry-sdk
```

```python
import sentry_sdk

sentry_sdk.init(
    dsn="your-sentry-dsn",
    traces_sample_rate=1.0
)
```

### 3. å®šæœŸç»´æŠ¤

#### æ¯å‘¨ä»»åŠ¡
- [ ] æ£€æŸ¥åº”ç”¨æ—¥å¿—
- [ ] æŸ¥çœ‹ API ä½¿ç”¨é‡
- [ ] æµ‹è¯•ä¸»è¦åŠŸèƒ½
- [ ] æ£€æŸ¥æœåŠ¡å™¨èµ„æºä½¿ç”¨

#### æ¯æœˆä»»åŠ¡
- [ ] æ›´æ–°ä¾èµ–åŒ…: `pip install --upgrade -r requirements.txt`
- [ ] æ£€æŸ¥å®‰å…¨æ›´æ–°
- [ ] å¤‡ä»½æ•°æ®å’Œé…ç½®
- [ ] æ£€æŸ¥ SSL è¯ä¹¦æœ‰æ•ˆæœŸ

---

## â“ å¸¸è§é—®é¢˜

### 1. Streamlit Cloud é—®é¢˜

#### Q: åº”ç”¨æ˜¾ç¤º "Sleeping"
**A**: å…è´¹åº”ç”¨åœ¨æ— æ´»åŠ¨æ—¶ä¼šä¼‘çœ ã€‚é¦–æ¬¡è®¿é—®éœ€è¦ 10-30 ç§’å”¤é†’ã€‚

#### Q: éƒ¨ç½²å¤±è´¥
**A**: æ£€æŸ¥:
1. `requirements.txt` æ˜¯å¦å®Œæ•´
2. Python ç‰ˆæœ¬å…¼å®¹æ€§
3. æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯

#### Q: Secrets ä¸ç”Ÿæ•ˆ
**A**:
1. ç¡®è®¤ TOML æ ¼å¼æ­£ç¡®
2. é‡å¯åº”ç”¨
3. æ£€æŸ¥å˜é‡åæ‹¼å†™

### 2. Heroku é—®é¢˜

#### Q: åº”ç”¨å´©æºƒ (R10 error)
**A**:
```bash
# æŸ¥çœ‹æ—¥å¿—
heroku logs --tail

# æ£€æŸ¥è¿›ç¨‹
heroku ps

# é‡å¯åº”ç”¨
heroku restart
```

#### Q: è¶…å‡ºå…è´¹é¢åº¦
**A**:
- Heroku å…è´¹è®¡åˆ’å·²å–æ¶ˆ
- è€ƒè™‘ä½¿ç”¨ Streamlit Cloud æˆ– Railway

### 3. æ€§èƒ½é—®é¢˜

#### Q: åº”ç”¨å“åº”æ…¢
**A**:
1. å®ç°ç¼“å­˜: `@st.cache_data`
2. å‡å°‘ max_tokens
3. ä½¿ç”¨ gpt-3.5-turbo ä»£æ›¿ gpt-4
4. å¢åŠ æœåŠ¡å™¨èµ„æº

#### Q: å†…å­˜ä½¿ç”¨é«˜
**A**:
1. é™åˆ¶ `chat_history` é•¿åº¦
2. å®šæœŸæ¸…ç† session_state
3. ä½¿ç”¨æ›´å°çš„æ¨¡å‹

---

## ğŸ“š ç›¸å…³èµ„æº

- [Streamlit Cloud æ–‡æ¡£](https://docs.streamlit.io/streamlit-community-cloud)
- [Heroku Python éƒ¨ç½²æŒ‡å—](https://devcenter.heroku.com/categories/python-support)
- [Railway æ–‡æ¡£](https://docs.railway.app)
- [Docker å®˜æ–¹æ–‡æ¡£](https://docs.docker.com)
- [Nginx é…ç½®æŒ‡å—](https://nginx.org/en/docs/)

---

## ğŸ‰ éƒ¨ç½²åæ¸…å•

- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] æ‰€æœ‰ API è¿æ¥æ­£å¸¸
- [ ] æµ‹è¯•ç¤ºä¾‹æŸ¥è¯¢åŠŸèƒ½æ­£å¸¸
- [ ] HTTPS å·²å¯ç”¨ (ç”Ÿäº§ç¯å¢ƒ)
- [ ] æ—¥å¿—ç›‘æ§å·²é…ç½®
- [ ] å¤‡ä»½ç­–ç•¥å·²å»ºç«‹
- [ ] æ–‡æ¡£å·²æ›´æ–°ï¼ŒåŒ…å«éƒ¨ç½² URL
- [ ] å›¢é˜Ÿæˆå‘˜å·²é€šçŸ¥

---

**æ­å–œ! æ‚¨çš„ AI æ—…è¡Œä»£ç†å·²æˆåŠŸéƒ¨ç½²! ğŸŠ**

**æœ€åæ›´æ–°**: 2025-10-17
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0